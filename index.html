<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Biblioth√®que de jeux de bar</title>
  <meta name="description" content="Une biblioth√®que gratuite et ouverte de jeux de bar : r√®gles, mat√©riel, dur√©e, nombre de joueurs, variantes et conseils de mise en place." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#fdfbf7;--card:#fffefc;--muted:#5f5b56;--text:#2c2620;--accent:#c97a3d;--accent2:#946846;--ok:#387f39;--warn:#b08900;--danger:#b54747;
      --radius:10px;--shadow:0 3px 10px rgba(0,0,0,.1)
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:linear-gradient(180deg, var(--bg) 0%, #f3efe7 100%);color:var(--text);font:16px/1.6 Nunito,system-ui,-apple-system,Segoe UI,Roboto,Inter,Ubuntu,"Helvetica Neue",Arial}
    a{color:var(--accent)}
    header{background:linear-gradient(90deg, #d7c4a5, #f5ead7);border-bottom:2px solid #e2d3b7}
    .wrap{max-width:1000px;margin:0 auto;padding:20px}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:42px;height:42px;border-radius:8px;background:#c97a3d;color:white;font-weight:bold;font-size:20px;display:grid;place-items:center;box-shadow:var(--shadow)}
    h1{font-size:26px;margin:0;font-family:"Playfair Display",serif;color:var(--accent2)}
    .tagline{color:var(--muted);font-size:15px;margin-top:4px;font-style:italic}

    .controls{display:grid;grid-template-columns:1fr 1fr 1fr 1fr;gap:12px;margin-top:14px}
    .controls input{
  width:100%;padding:12px 14px;border-radius:12px;border:1px solid #e7dccd;
  background:#fff;color:var(--text);box-shadow:inset 0 1px 0 rgba(0,0,0,.03)
}
.multi{position:relative;background:#fff;border:1px solid #e7dccd;border-radius:12px;padding:0}
.multi summary{list-style:none;padding:12px 14px;cursor:pointer;display:flex;justify-content:space-between;align-items:center}
.multi summary::-webkit-details-marker{display:none}
.multi[open]{box-shadow:var(--shadow)}
.multi .panel{position:absolute;z-index:30;background:#fff;border:1px solid #eadfce;border-radius:12px;padding:10px;top:calc(100% + 6px);left:0;right:0;display:grid;gap:8px}
.multi label{display:flex;align-items:center;gap:8px;padding:6px 8px;border-radius:8px}
.multi input[type=checkbox]{accent-color: var(--accent)}
.multi summary em{color:#7a5a40;font-style:normal;font-weight:700;font-size:12px}
.multi summary span{font-weight:800;font-size:12px;letter-spacing:.02em;color:#7a5a40}

/* Surbrillance pour le jeu al√©atoire */
.highlight{outline:2px solid var(--accent2);animation:flash 1s ease-in-out 0s 2 alternate;border-radius:var(--radius)}
@keyframes flash{from{background:#fff4df} to{background:#ffffff}}

    .checks{width:100%;padding:10px 12px;border:1px solid #e7dccd;background:#fff;border-radius:12px}
    .checks legend{font-weight:800;font-size:12px;letter-spacing:.02em;color:#7a5a40;margin-bottom:6px}
    .checks .opts{display:flex;flex-wrap:wrap;gap:8px}
    .checks label{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:999px;border:1px solid #eadfce;background:#fffaf3;font-size:13px;color:#7a5a40}
    .checks input[type=checkbox]{accent-color: var(--accent);}

    .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:18px;margin-top:20px}
    .card{background:var(--card);border:1px solid #e2d9c9;border-radius:var(--radius);box-shadow:var(--shadow);padding:18px;display:flex;flex-direction:column;gap:10px}
    .pill{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:999px;border:1px solid #d0c4b0;font-size:12px;color:var(--muted);background:#faf6ef}
    .meta{display:flex;flex-wrap:wrap;gap:8px}
    .title{font-size:19px;font-weight:700;margin:0 0 4px;font-family:"Playfair Display",serif;color:var(--accent2)}
    .desc{color:var(--muted);margin:0}
    .steps{margin:10px 0 0 18px}
    .steps li{margin:6px 0}
    .badges{display:flex;gap:8px;flex-wrap:wrap}

    .toolbar{display:flex;justify-content:space-between;align-items:center;margin-top:12px}
    .btn{background:#f5ead7;border:1px solid #d0c4b0;color:var(--accent2);padding:10px 14px;border-radius:8px;text-decoration:none;font-weight:600;box-shadow:var(--shadow)}
    .btn:hover{background:#e7dac4}

    footer{margin:40px 0 60px;color:var(--muted);font-size:14px;text-align:center}

    .section{margin-top:36px;padding:20px;background:#fbf7f1;border:1px solid #e2d9c9;border-radius:var(--radius)}

    @media (max-width:1024px){.grid{grid-template-columns:1fr 1fr}.controls{grid-template-columns:1fr 1fr}}
    @media (max-width:680px){.grid{grid-template-columns:1fr}.controls{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <div class="brand">
      <a href="#" id="homeLink" class="logo" aria-label="Accueil ‚Äî r√©initialiser les filtres">üçª</a>
        <div>
          <h1>Biblioth√®que de jeux de bar</h1>
          <div class="tagline">Une ambiance conviviale, des r√®gles simples et du plaisir partag√©.</div>
        </div>
      </div>
      <div class="controls" aria-label="Filtres de recherche">
  <input id="q" type="search" placeholder="Chercher un jeu (ex: fl√©chettes, d√©s, sans mat√©riel)" />

  <details class="multi" id="playersDDL">
    <summary><span>Joueurs</span><em id="playersSummary">Tous</em></summary>
    <div class="panel">
      <label><input type="checkbox" name="players" value="2">2+</label>
      <label><input type="checkbox" name="players" value="3">3+</label>
      <label><input type="checkbox" name="players" value="4">4+</label>
      <label><input type="checkbox" name="players" value="6">6+</label>
      <label><input type="checkbox" name="players" value="8">8+</label>
    </div>
  </details>

  <details class="multi" id="durationDDL">
    <summary><span>Dur√©e</span><em id="durationSummary">Toutes</em></summary>
    <div class="panel">
      <label><input type="checkbox" name="duration" value="<10">&lt;10 min</label>
      <label><input type="checkbox" name="duration" value="10-20">10‚Äì20 min</label>
      <label><input type="checkbox" name="duration" value=">20">&gt;20 min</label>
    </div>
  </details>

  <details class="multi" id="materialDDL">
    <summary><span>Mat√©riel</span><em id="materialSummary">Tous</em></summary>
    <div class="panel">
      <label><input type="checkbox" name="mat" value="rien">Rien</label>
      <label><input type="checkbox" name="mat" value="cartes">Cartes</label>
      <label><input type="checkbox" name="mat" value="d√©s">D√©s</label>
      <label><input type="checkbox" name="mat" value="fl√©chettes">Fl√©chettes</label>
      <label><input type="checkbox" name="mat" value="billard">Billard</label>
      <label><input type="checkbox" name="mat" value="baby-foot">Baby-foot</label>
      <label><input type="checkbox" name="mat" value="gobelets">Gobelets</label>
      <label><input type="checkbox" name="mat" value="capsules">Capsules</label>
      <label><input type="checkbox" name="mat" value="totem">Totem</label>
      <label><input type="checkbox" name="mat" value="sous-bocks">Sous-bocks</label>
    </div>
  </details>
</div>
</div>
</header>


  <main class="wrap">
    <section class="section" id="ephemeride">
  <h2>√âph√©m√©ride</h2>
  <p id="quote" class="desc">‚Ä¶</p>
</section>

<div class="toolbar" style="margin-top:22px;display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap">
  <div id="count">0 jeu(x)</div>
  <div style="display:flex;gap:8px;flex-wrap:wrap">
    <button class="btn" id="randomBtn" type="button">Jeu al√©atoire</button>
    <a class="btn" href="#proposer">Proposer un jeu</a>
  </div>
</div>


    <section id="list" class="grid" aria-live="polite"></section>

    <section class="section" id="apropos">
      <h2>√Ä propos</h2>
      <p>Cette biblioth√®que r√©unit des jeux de bar classiques et conviviaux : fl√©chettes, baby-foot, cartes, d√©s, quiz‚Ä¶ L‚Äôobjectif est de retrouver l‚Äôambiance chaleureuse d‚Äôun pub o√π tout le monde peut participer, sans prise de t√™te.</p>
      <ul>
        <li><strong>Gratuit</strong> ‚Äî r√®gles claires et adaptables.</li>
        <li><strong>Avec mod√©ration</strong> ‚Äî certaines variantes incluent de l‚Äôalcool, mais toujours de fa√ßon optionnelle.</li>
        <li><strong>Pour tous</strong> ‚Äî des jeux calmes aux jeux d‚Äôambiance, chacun peut trouver sa place.</li>
      </ul>
    </section>

    <section class="section" id="proposer">
      <h2>Proposer un jeu</h2>
      <p>Vous connaissez un jeu local, une variante ou une r√®gle maison ? Partagez-le en envoyant :</p>
      <p><a class="btn" href="mailto:contact@exemple.com?subject=Proposition%20de%20jeu%20de%20bar">‚úâÔ∏è Envoyer une proposition</a></p>
    </section>

    <footer>
      Fait avec üç∫ et ‚òï ‚Äî Version 1.0 ‚Äî Licence CC BY 4.0
    </footer>
  </main>

  <template id="card-tpl">
    <article class="card">
      <h3 class="title"></h3>
      <p class="desc"></p>
      <div class="meta"></div>
      <details>
        <summary>R√®gles d√©taill√©es</summary>
        <ol class="steps"></ol>
        <div class="badges"></div>
      </details>
    </article>
  </template>

  <script>
    // M√™me script de filtrage et affichage que la V1
    const data = [] // ‚Üê tes jeux viendront ici
    const list = document.getElementById('list');
    const tpl = document.getElementById('card-tpl');
    const q = document.getElementById('q');
    const playerChecks = document.querySelectorAll('input[name="players"]');
    const durationChecks = document.querySelectorAll('input[name="duration"]');
    const matChecks = document.querySelectorAll('input[name="mat"]');
    const count = document.getElementById('count');
    const count = document.getElementById('count');
    const randomBtn = document.getElementById('randomBtn');
    const homeLink = document.getElementById('homeLink');
    const playerChecks = document.querySelectorAll('input[name="players"]');
    const durationChecks = document.querySelectorAll('input[name="duration"]');
    const matChecks = document.querySelectorAll('input[name="mat"]');

  // √âph√©m√©ride ‚Äî phrases du jour (√©chantillon, tu peux en mettre 366)
  const ephemeridePhrases = [
  "La meilleure r√®gle du bar : on s'amuse, on partage.",
  "Aujourd'hui, on d√©couvre un nouveau jeu.",
  "Un petit d√©fi vaut mieux que mille excuses.",
  "Rire fort, jouer fair-play.",
  "Le hasard fait bien les jeux.",
  "On m√©lange les √©quipes, on double le fun.",
  "La victoire est douce, la revanche encore plus.",
  "Un tour rapide ? On dit oui !",
  "Le meilleur mat√©riel, c'est l'envie de jouer.",
  "On essaye, on rate, on recommence.",
  "Ce soir, un classique et une nouveaut√©.",
  "Le bar est une table de jeu g√©ante.",
  "Qui perd paye‚Ä¶ un sourire.",
  "On range les t√©l√©phones, on sort les d√©s.",
  "Une manche courte en appelle une autre.",
  "On joue pour cr√©er des souvenirs.",
  "La chance sourit aux audacieux.",
  "Le secret d'une bonne soir√©e : de bons partenaires.",
  "Aujourd'hui, c'est vous le ma√Ætre du quiz.",
  "Un peu de strat√©gie, beaucoup de rires.",
  "R√®gles simples, plaisir maximum.",
  "Le fair-play, c'est la classe.",
  "Un nouveau jeu par semaine, au moins !",
  "On applaudit les beaux coups.",
  "La meilleure revanche : rejouer.",
  "Faites une pause, lancez un d√©.",
  "Tout le monde peut gagner une manche.",
  "La soir√©e commence avec un ¬´ Jeu al√©atoire ¬ª."
];
function dayOfYear(d){ const start=new Date(d.getFullYear(),0,0); const diff=d-start; const oneDay=1000*60*60*24; return Math.floor(diff/oneDay); }
function renderEphemeride(){ const i=dayOfYear(new Date()); const t=ephemeridePhrases[i % ephemeridePhrases.length]; const el=document.getElementById('quote'); if(el) el.textContent=t; }

    
let lastResults = [];


    function durationBucket(mins){
      if(mins<10) return '<10';
      if(mins<=20) return '10-20';
      return '>20';
    }

    function getMaterialCats(g){
      const text = (g.equipment.join(' ') + ' ' + g.name + ' ' + (g.tags||[]).join(' ')).toLowerCase();
      const cats = new Set();
      if(g.equipment.length===0 || text.includes('sans mat√©riel') || text.includes('sans materiel') || (g.tags||[]).includes('sans mat√©riel')) cats.add('rien');
      if(text.includes('carte')) cats.add('cartes');
      if(text.includes('d√©s') || text.includes('des') ) cats.add('d√©s');
      if(text.includes('cible') || text.includes('fl√©chette') || text.includes('flechette')) cats.add('fl√©chettes');
      if(text.includes('billard')) cats.add('billard');
      if(text.includes('baby‚Äëfoot') || text.includes('baby-foot') || text.includes('babyfoot')) cats.add('baby-foot');
      if(text.includes('gobelet')) cats.add('gobelets');
      if(text.includes('capsule')) cats.add('capsules');
      if(text.includes('totem')) cats.add('totem');
      if(text.includes('sous‚Äëbock') || text.includes('sous-bock')) cats.add('sous-bocks');
      return Array.from(cats);
    }

    function render(items){
      list.innerHTML='';
      items.forEach(g=>{
        const node = tpl.content.cloneNode(true);
        node.querySelector('.title').textContent = g.name;
        node.querySelector('.desc').textContent = g.summary;
        const meta = node.querySelector('.meta');
        const pills = [
          `${g.players}+ joueurs`,
          `${g.duration} min`,
          `Bruit : ${g.noise}`,
          `Niveau : ${g.level}`,
        ];
        pills.forEach(p=>{
          const span = document.createElement('span');
          span.className='pill';
          span.textContent=p; meta.appendChild(span);
        });
        const steps = node.querySelector('.steps');
        g.steps.forEach(s=>{const li=document.createElement('li');li.textContent=s;steps.appendChild(li)});
        const badges = node.querySelector('.badges');
        const equip = document.createElement('span');
        equip.className='pill'; equip.textContent = `Mat√©riel : ${g.equipment.join(', ')||'‚Äî'}`; badges.appendChild(equip);
        const alcohol = document.createElement('span'); alcohol.className='pill'; alcohol.textContent = `Alcool : ${g.alcohol}`; badges.appendChild(alcohol);
        const tags = document.createElement('span'); tags.className='pill'; tags.textContent = `Tags : ${g.tags.join(', ')}`; badges.appendChild(tags);
        list.appendChild(node);
      });
      count.textContent = `${items.length} jeu(x)`;
      const article = node.querySelector('article');
article.dataset.slug = g.slug || g.name.toLowerCase().replace(/[^a-z0-9]+/g,'-');
// ... (le reste inchang√©)
lastResults = items;

    }

  function filter(){
  const query = q.value.trim().toLowerCase();
  const psel = Array.from(document.querySelectorAll('input[name="players"]:checked')).map(i=>parseInt(i.value));
  const dsel = Array.from(document.querySelectorAll('input[name="duration"]:checked')).map(i=>i.value);
  const msel = Array.from(document.querySelectorAll('input[name="mat"]:checked')).map(i=>i.value);

  let items = data.filter(g=>{
    const hay = [g.name, g.summary, g.tags.join(' '), g.equipment.join(' '), g.level].join(' ').toLowerCase();
    const qok = !query || hay.includes(query);
    const pok = psel.length===0 || psel.some(v=> g.players >= v);
    const dok = dsel.length===0 || dsel.includes(durationBucket(g.duration));
    const mats = getMaterialCats(g);
    const mok = msel.length===0 || msel.some(m=> mats.includes(m));
    return qok && pok && dok && mok;
  });

  render(items);
  window.scrollTo({top:0,behavior:'smooth'});
}
function updateSummary(id, values){
  const el = document.getElementById(id);
  el.textContent = values.length ? values.join(', ') : (id.includes('players')? 'Tous' : (id.includes('duration')? 'Toutes' : 'Tous'));
}
function updateAllSummaries(){
  const p = Array.from(document.querySelectorAll('input[name="players"]:checked')).map(i=>i.value+'+');
  const d = Array.from(document.querySelectorAll('input[name="duration"]:checked')).map(i=>i.value);
  const m = Array.from(document.querySelectorAll('input[name="mat"]:checked')).map(i=>i.value);
  updateSummary('playersSummary', p);
  updateSummary('durationSummary', d);
  updateSummary('materialSummary', m);
}

q.addEventListener('input', ()=>{ filter(); });

playerChecks.forEach(el=>el.addEventListener('change', ()=>{ updateAllSummaries(); filter(); }));
durationChecks.forEach(el=>el.addEventListener('change', ()=>{ updateAllSummaries(); filter(); }));
matChecks.forEach(el=>el.addEventListener('change', ()=>{ updateAllSummaries(); filter(); }));

// fermer un dropdown si on clique ailleurs
document.addEventListener('click', (e)=>{
  document.querySelectorAll('details.multi[open]').forEach(d=>{
    if(!d.contains(e.target)) d.removeAttribute('open');
  });
});

// bouton Jeu al√©atoire
randomBtn.addEventListener('click', ()=>{
  const pool = lastResults.length ? lastResults : data;
  if(!pool.length) return;
  const pick = pool[Math.floor(Math.random()*pool.length)];
  const slug = (pick.slug || pick.name.toLowerCase().replace(/[^a-z0-9]+/g,'-'));
  const el = document.querySelector(`[data-slug="${slug}"]`);
  if(el){
    el.classList.add('highlight');
    el.scrollIntoView({behavior:'smooth', block:'center'});
    setTimeout(()=>el.classList.remove('highlight'), 2000);
  }
});

// clic sur la bi√®re = retour page d‚Äôaccueil + reset filtres
homeLink.addEventListener('click', (e)=>{
  e.preventDefault();
  q.value='';
  document.querySelectorAll('details.multi input[type="checkbox"]').forEach(c=>c.checked=false);
  updateAllSummaries();
  filter();
  window.scrollTo({top:0,behavior:'smooth'});
});

    updateAllSummaries();
    renderEphemeride();

  </script>
</body>
</html>
